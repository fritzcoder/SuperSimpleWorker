<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/pygment_trac.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print" />

    <title>delayed_job.net by Fritz (Fredrick Seitz)</title>
  </head>

  <body>
    <header>
      <div class="container">
        <h1><img src="https://f.cloud.github.com/assets/875813/788006/e75df426-eaee-11e2-98a2-a3270d43960d.png" alt="delayed_job.net"/>
        delayed_job.net</h1>
        <h2>A simple light weight background job worker</h2>
        <i>A port of delayed_job for Mono and Microsoft .NET</i>

        <section id="downloads">
          <a href="https://github.com/fritzcoder/delayed_job.net/releases/download/v0.1-beta/delayed_job.net.zip" class="btn">
          Download Pre-compiled</a>
          <a href="https://github.com/fritzcoder/delayed_job.net" class="btn btn-github"><span class="icon"></span>View on GitHub</a>
          <a href="https://github.com/fritzcoder/delayed_job.net/releases/download/v0.1.9/delayed_job.net.zip" class="btn">
          Download Examples</a>
        </section>
      </div>
    </header>

    <div class="container">
      <section id="main_content">
        <h1>
<a name="delayed-jobnet-v01b" class="anchor" href="#delayed-jobnet-v01b">
<span class="octicon octicon-link"></span></a>v0.1b <a href="en/index.html" class="btn">API Docs</a></h1>
<p>Cross platform Status:
OSX: <strong>PASS</strong><br />
Ubuntu: <strong>PASS</strong><br />
Windows: <strong>PASS</strong><br /> </p>

<p>Delayed_job.net (or DJ.NET) encapsulates the common pattern of asynchronously executing longer tasks in the background.</p>

<p>This is ported and inspired from the original project:
<a href="https://github.com/tobi/delayed_job">https://github.com/tobi/delayed_job</a></p>

<p>If you would like more in-depth information on use and FAQ please see the wiki: </p>

<p><a href="https://github.com/fritzcoder/delayed_job.net/wiki">https://github.com/fritzcoder/delayed_job.net/wiki</a></p>

<p>There are two major components to Delayed_job.net:</p>

<ol>
<li><p>The DelayedJob assembly which gives your program access to creating jobs for scheduling</p></li>
<li><p>worker.exe, this runs the jobs scheduled by your program. It can be run in the background.</p></li>
</ol>

<p>Like the ruby version of delayed_job some examples of use are: </p>

<ul>
<li>sending massive newsletters</li>
<li>image resizing</li>
<li>http downloads</li>
<li>batch imports </li>
<li>spam checks </li>
</ul><h2>
<a name="setup" class="anchor" href="#setup"><span class="octicon octicon-link"></span></a>Setup</h2>

<ul>
<li>Copy the DelayedJob.dll in your project bin folder.</li>
<li>Using MonoDevelop or Visual Studio reference the DelayedJob.dll</li>
<li>Create the delayed_job table in one of the supported databases. The sql table script can be found in the 
sql folder.</li>
<li>Start creating jobs use The IJob interface and create your class:</li>
</ul><pre><code>public class EmailJob : DelayedJob.IJob
{
    //Make sure information you want to persist in the database is public
    //There is no way to serialize and deserialize private data.
    public string fromAddress = "email@gmail.com";
    public string toAddress = "toemail@gmail.com";
    public const string fromPassword = "";
    public const string subject = "DelayJob.net test";
    public const string body = "A automated test";

    public void perform(){
        var smtp = new SmtpClient
        {
            Host = "smtp.gmail.com",
            Port = 587,
            EnableSsl = true,
            DeliveryMethod = SmtpDeliveryMethod.Network,
            UseDefaultCredentials = false,
            Credentials = new NetworkCredential(fromAddress, fromPassword)
        };
        using (var message = new MailMessage(fromAddress, toAddress)
               {
            Subject = subject,
            Body = body
        })
        {

            ServicePointManager.ServerCertificateValidationCallback = 
                delegate(object s, X509Certificate certificate, X509Chain chain, SslPolicyErrors sslPolicyErrors) 
            { return true; };
            smtp.Send(message);
        }
    }
}

</code></pre>

<ul>
<li>Now schedule the job:</li>
</ul><pre><code>//Set the Repository with the database you would like to use with a
//connection string. 
Job.Repository = new RepositoryMonoSQLite("URI=file:delayed_job.db");
//Enqueue the Job now. When the worker process runs it will execute the 
//perform method. In this case it will send an email.
Job.Enqueue(new EmailJob());
</code></pre>

<ul>
<li>The worker process needs to be configured. The worker.exe has a file called
worker.exe.config. Configure the database you want to use and the connection string. 
It Should be the same database you are enqueueing your jobs in. You can now 
run worker process by:</li>
</ul><pre><code>mono worker.exe [optional name]
</code></pre>

<p>In the background: </p>

<pre><code>mono worker.exe &amp;
</code></pre>

<p>Or on windows you can install it as a service or simply run:</p>
<pre><code>worker.exe [optional name]
</code></pre>

<p>Install as a windows service:</p>
<pre><code>InstallUtil.exe worker.exe 
</code></pre>
<p>Then start the service through windows service console.</p>

<p>Please see the wiki for more detailed information. </p>

<p>Please report questions, feature requests and bugs to: 
<a href="https://github.com/fritzcoder/delayed_job.net/issues">https://github.com/fritzcoder/delayed_job.net/issues</a></p>
      </section>
    </div>
  </body>
</html>
